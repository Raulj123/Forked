<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://mdbcdn.b-cdn.net/wp-content/themes/mdbootstrap4/docs-app/css/dist/mdb5/standard/core.min.css">
    <!-- Define your CSS file here so you can style your HTML -->
    <link rel="stylesheet" href="login.css" />
    <!-- MDB icon -->
  <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" />
  <!-- Google Fonts Roboto -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" />
  <!-- MDB -->
  <link rel="stylesheet" href="css/bootstrap-login-form.min.css" />

    <title>Log In Page</title>
  </head>
  <body>
   
    <section class="vh-100" style="background-color: #508bfc;">
      <div class="container py-5 h-100">
        <h1 style="color: white;">Study Nexus</h1>
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-12 col-md-8 col-lg-6 col-xl-5">
            <div class="card shadow-2-strong" style="border-radius: 3rem;">
              <div class="card-body p-5 text-center">
    
                <h3 class="mb-5">Log In !</h3>
    
                <div class="form-outline mb-4"style="position: relative;">
                  <input type="email" id="typeEmailX-2" class="form-control form-control-lg" />
                  <label class="form-label" for="typeEmailX-2">User name</label>
                </div>
    
                <div class="form-outline mb-4">
                  <input type="password" id="typePasswordX-2" class="form-control form-control-lg" />
                  <label  class="form-label" for="typePasswordX-2" >Password</label>
                </div>
    
                
    
                <button class="btn btn-primary btn-lg btn-block" id= "btnLog" type="submit">Log In</button>
    
                <hr class="my-4">
    
                <button class="btn btn-lg btn-block btn-primary" onclick ="window.location.href = 'home.html'" ; style="background-color: #dd4b39;" type="submit"><i ></i> Home</button>
                
                <a href="signup.html">Click here to sign up</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      
    </section>
    <!-- End your project here-->
    <!--onclick ="window.location.href = 'login.html'";-->
    <script type="module">

      // Import the functions you need from the SDKs you need
    
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
    
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-analytics.js";
    
      // TODO: Add SDKs for Firebase products that you want to use
    
      // https://firebase.google.com/docs/web/setup#available-libraries
    
    
      // Your web app's Firebase configuration
    
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    
      const firebaseConfig = {
    
        apiKey: "AIzaSyB0-dpVIxUu3yflvnq9sC0r0JDpnrlGrCI",
    
        authDomain: "hackathon-9dd6f.firebaseapp.com",
    
        projectId: "hackathon-9dd6f",
    
        storageBucket: "hackathon-9dd6f.appspot.com",
    
        messagingSenderId: "303763798557",
    
        appId: "1:303763798557:web:491afe62c8d14b39c4e4f4",
    
        measurementId: "G-EVZBJS4SSX"
    
      };
    
    
      // Initialize Firebase
  
      const app = initializeApp(firebaseConfig);
    
      const analytics = getAnalytics(app);
    
      import { getDatabase, set, update, remove, ref, child,get } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";
    


    
   
      const db = getDatabase();
      var finduser = document.querySelector("#typeEmailX-2");
      var findpass = document.querySelector("#typePasswordX-2");
      var btnLog = document.querySelector('#btnLog');


      btnLog.addEventListener('click', findData);

      function findData(){
        const dbref = ref(db);  //looking for a refrence in db
        if(finduser.value != "" && findpass != ""){
        get(child(dbref, "Users/" + finduser.value))
        .then((snapshot)=>{
            if(snapshot.exists() ){
                //finduser.innerHTML = "name:" + snapshot.val().Name;   couldnt get this to display?
                //alert("yes");
                const user = snapshot.val();
                if (user.Pass === findpass.value) {
                window.location.href = "home.html";
                }else {
                alert("Incorrect password");
                }
            }else{
                alert("user does not exist");
            }
        })
    }
      }



    </script>
  
</body>
</html>